<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="imgs/payrus_icon.png">
  <title>Payment Bridge</title>
    
  <link rel="stylesheet" href="payrus.css">
  <link rel="stylesheet" href="welcome.css">
  
  <script src="frontend.js"></script>
  <script src="backend.js"></script>
</head>

<script>
  function validateEmail() {
    Frontend.validateInputField("WelcomeLoginPanelEmailInput", Frontend.emailValidator)

    Frontend.setElementEnabled("WelcomeLoginPanelLoginButton", canLogIn())
  }

  function validatePassword() {
    Frontend.validateInputField("WelcomeLoginPanelPasswordInput", Frontend.passwordValidator)

    Frontend.setElementEnabled("WelcomeLoginPanelLoginButton", canLogIn())
  }

  function canLogIn() {
    return Frontend.emailValidator(document.getElementById("WelcomeLoginPanelEmailInput").value)
      && Frontend.passwordValidator(document.getElementById("WelcomeLoginPanelPasswordInput").value)

  }

  function performLogin() {
    if (!canLogIn()) {
      return
    }

    document.getElementById("WelcomeLoginPanelLoginStatusLabel").innerHTML = "Логинюсь..."
    Backend.logIn(document.getElementById("WelcomeLoginPanelEmailInput").value, document.getElementById("WelcomeLoginPanelPasswordInput").value, function(code) {
      if (code === BACKEND_CODE_SUCCESS) {
        window.location = "dashboard.html"
      } else {
        if (code == BACKEND_CODE_NOT_FOUND) {
          document.getElementById("WelcomeLoginPanelLoginStatusLabel").innerHTML = "Неверный email / пароль"
        } else {
          document.getElementById("WelcomeLoginPanelLoginStatusLabel").innerHTML = "Не получается залогиниться - ошибка сервера"
        }
      }
    })
  }

</script>

<body">
  <div id="PayrusHeader">
    <div id="PayrusLeftSideHeaderMenu">
      <div class="payrus-header-menu-item selected" onclick="window.location='welcome.html'">Частным лицам</div>
      <div class="payrus-header-menu-item" onclick="window.location='registration.html'">Регистрация</div>
    </div>
    <div id="PayrusRightSideHeaderMenu">
      <div class="payrus-header-menu-item" onclick="window.location='howitworks.html'">Как это работает</div>
      <div class="payrus-header-menu-item" onclick="window.location='contactus.html'">Обратная связь</div>
    </div>
  </div>

  <div id="PayrusPageMainArea">
    <img id="PayrusLogo" src="imgs/payrus.png">
    <div id="WelcomeLoginPanel">
      <div id="WelcomeLoginPanelDescription">
        Путешествуйте как раньше!
        <br>
        <br>
        Путешествуйте легко!
        <br>
        <br>
        <b>Платить за границей неудобно? Есть решение!</b>
      </div>
      <div id="WelcomeLoginPanelLoginBox">
        <input id="WelcomeLoginPanelEmailInput" type="text" placeholder="Email" oninput="validateEmail()">
        <input id="WelcomeLoginPanelPasswordInput" type="password" placeholder="Пароль" oninput="validatePassword()">
        <input id="WelcomeLoginPanelRememberCheck" type="checkbox">
        <label id="WelcomeLoginPanelRememberCheckLabel" for="WelcomeLoginPanelRememberCheck">Запомнить меня</label>
        <button id="WelcomeLoginPanelLoginButton" disabled onclick="performLogin()">Войти</button>
        <label id="WelcomeLoginPanelLoginStatusLabel"></label>
        
        <div id="WelcomeLoginPanelForgotPasswordPanel">
          <a id="WelcomeLoginPanelForgotPasswordLink" href="">Забыли пароль?</a>
        </div>

        <div id="WelcomeLoginPanelCreateAccountPanel">
          <label id="WelcomeLoginPanelCreateAccountLabel">Вы еще не занеристированы?</label>
          <a id="WelcomeLoginPanelCreateAccountLink" href="registration.html">Зарегистрироваться!</a>
        </div>
      </div>
    </div>
  </div>

  <div id="PayrusFooter">
      PizTec Corporation, 2024.&nbsp;&nbsp;&nbsp;All Rights Reserved. 
  </div>
</body>
</html>
